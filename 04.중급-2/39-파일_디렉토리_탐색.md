# 파일 및 디렉토리 탐색

## 📁 Java 파일 탐색 및 필터링 정리

### ✅ 1. 현재 디렉토리에서 .java 파일만 출력 (Stream + Files.list)
```java
Path parent = Paths.get(".");
try (Stream<Path> children = Files.list(parent)
        .filter(path -> path.getFileName().toString().endsWith(".java"))) {
    children.forEach(path -> System.out.println(path.toAbsolutePath()));
} catch (Exception e) {
    e.printStackTrace();
}
```
- 특징: 현재 디렉토리의 파일 목록을 스트림으로 처리
- 장점: filter()로 조건 지정 가능, forEach()로 간결한 출력

### ✅ 2. 특정 디렉토리의 모든 파일 출력 (Files.list)
```java
Path dir = Paths.get("/Users/jeongjunghwan/Downloads");
try (Stream<Path> children = Files.list(dir)) {
    children.forEach(path -> System.out.println(path.toAbsolutePath()));
} catch (Exception ex) {
    ex.printStackTrace();
}
```
- 특징: 지정된 디렉토리의 모든 파일을 스트림으로 출력
- 주의: 하위 디렉토리는 탐색하지 않음

### ✅ 3. .txt 파일만 필터링 (File + FilenameFilter)
```java
Path dirPath = Paths.get("/Users/jeongjunghwan/Downloads");
File dir = dirPath.toFile();
String[] files = dir.list((d, name) -> name.endsWith(".txt"));
System.out.println(files.length);
```
- 특징: 전통적인 File API 방식
- 장점: 간단한 필터링에 적합
- 단점: 스트림 API보다 유연성 낮음

### ✅ 4. 하위 디렉토리까지 탐색하며 .txt 포함 여부 확인 (Files.walkFileTree)
```java
Path path = Paths.get("/Users/jeongjunghwan/Downloads");
Files.walkFileTree(path, new SimpleFileVisitor<Path>() {
    @Override
    public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) throws IOException {
        if (file.getFileName().toString().contains(".txt")) {
            System.out.println(file.toAbsolutePath());
            return FileVisitResult.TERMINATE;
        }
        return FileVisitResult.CONTINUE;
    }
});
```
- 특징: 재귀적으로 모든 하위 디렉토리까지 탐색
- 장점: 복잡한 조건 처리 가능, 탐색 중단도 제어 가능
- 용도: 대규모 디렉토리 구조 탐색에 적합

## 🧠 파일 탐색 API 비교 요약

| API 방식                   | 하위 폴더 탐색 | 필터링 가능 | 스트림 사용 | 유연성 | 사용 난이도 |
|----------------------------|----------------|--------------|--------------|--------|--------------|
| `Files.list()`             | ❌             | ✅           | ✅           | 중간   | 쉬움         |
| `File.list(FilenameFilter)`| ❌             | ✅           | ❌           | 낮음   | 매우 쉬움    |
| `Files.walkFileTree()`     | ✅             | ✅           | ❌           | 높음   | 중간~어려움  |
| `Files.walk()`             | ✅             | ✅           | ✅           | 최고   | 중간         |

## ✨ 추천 활용 전략
- 간단한 필터링: Files.list() + filter() + forEach()
- 하위 폴더까지 탐색: Files.walkFileTree() 또는 Files.walk()
- 복잡한 조건 처리: walkFileTree()에서 visitFile() 오버라이드
- 스트림 기반 처리: Files.walk()와 Stream<Path> 조합

# Files.walk
Files.walk()는 Java NIO에서 제공하는 매우 강력한 API로, 디렉토리 트리 전체를 스트림(Stream) 기반으로 탐색할 수 있게 해줌.  
아래에 개념, 사용법, 예제, 비교까지 체계적으로 정리.

## 🌲 Files.walk()란?
- 지정한 디렉토리부터 시작해 하위 디렉토리까지 재귀적으로 탐색하는 스트림 기반 API
- 반환 타입: Stream<Path>
- Java 8 이상에서 사용 가능

## ✅ 기본 사용법
```java
try (Stream<Path> paths = Files.walk(Paths.get("/your/path"))) {
    paths.forEach(System.out::println);
}
```
- 모든 하위 디렉토리의 파일과 폴더를 포함한 Path 스트림을 반환
- 스트림이므로 filter, map, sorted, limit 등 다양한 연산자와 조합 가능

## 🔍 Files.walk() 주요 특징

| 항목                  | 설명                                      |
|-----------------------|-------------------------------------------|
| 반환 타입             | `Stream<Path>`                            |
| 스트림 연산 지원      | `filter`, `map`, `limit`, `sorted` 등 가능 |
| 자원 자동 해제        | `try-with-resources`로 안전하게 사용 가능  |
| 탐색 깊이 제한 가능   | `Files.walk(path, depth)`로 제한 가능     |
| 하위 디렉토리 포함     | 기본적으로 모든 하위 디렉토리까지 탐색     |
| 파일/디렉토리 구분    | `Files.isRegularFile(path)` 등으로 필터링  |


## 🧪 실전 예제
### 1. .txt 파일만 출력
```java
try (Stream<Path> paths = Files.walk(Paths.get("/Users/jeongjunghwan/Downloads"))) {
    paths.filter(Files::isRegularFile)
         .filter(p -> p.toString().endsWith(".txt"))
         .forEach(System.out::println);
}
```

### 2. 탐색 깊이 제한 (최대 2단계까지만)
```java
try (Stream<Path> paths = Files.walk(Paths.get("/Users/jeongjunghwan/Downloads"), 2)) {
    paths.forEach(System.out::println);
}
```

```java
3. 파일 크기 기준 필터링
try (Stream<Path> paths = Files.walk(Paths.get("/Users/jeongjunghwan/Downloads"))) {
    paths.filter(Files::isRegularFile)
         .filter(p -> {
             try {
                 return Files.size(p) > 1024 * 1024; // 1MB 이상
             } catch (IOException e) {
                 return false;
             }
         })
         .forEach(System.out::println);
}
```

## 🧠 Files.walk() vs Files.walkFileTree()

| 항목                     | `Files.walk()`               | `Files.walkFileTree()`             |
|--------------------------|------------------------------|------------------------------------|
| 반환 타입                | `Stream<Path>`               | `FileVisitor` 인터페이스 기반     |
| 스트림 연산 지원         | `filter()`, `map()`, `limit()` 등 | ❌ 직접 제어 필요                  |
| 콜백 방식                | ❌                           | `visitFile()` 등 메서드 오버라이드 |
| 탐색 중단 제어           | ❌                           | `FileVisitResult.TERMINATE` 가능  |
| 하위 디렉토리 탐색       | ✅                           | ✅                                 |
| 예외 처리 및 분기 제어   | 제한적 (`try-catch`)         | 유연한 분기 처리 가능              |
| 복잡한 로직 처리         | 중간                         | 고급 제어 가능                     |
| 사용 난이도              | 쉬움                         | 중간~어려움                        |

### ✨ 요약 포인트
- Files.walk()는 스트림 기반으로 간단하고 유연한 탐색에 적합
- Files.walkFileTree()는 복잡한 조건, 중단 제어, 디렉토리 진입/종료 처리가 필요한 경우에 적합

## Files.walk() 요약

- 스트림 기반의 재귀적 디렉토리 탐색
- filter/map 등과 조합해 유연한 파일 처리 가능
- try-with-resources로 자원 자동 해제
- 복잡한 제어가 필요하면 walkFileTree() 사용

---



