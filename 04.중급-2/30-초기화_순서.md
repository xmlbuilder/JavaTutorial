# 클래스 초기화 순서
이 코드는 Java에서 클래스 초기화 순서를 명확하게 보여주는 예제.  
특히 static initializer, instance initializer, 그리고 constructor가 어떤 순서로 실행되는지를 이해하는 데 도움이 됩니다.

## 🔍 자바 클래스 초기화 순서 요약
Java에서 객체가 생성될 때, 다음 순서로 초기화가 진행됩니다:
### ✅ 클래스 로딩 시 (한 번만 실행됨)
- 부모 클래스의 static 블록
- 자식 클래스의 static 블록
### ✅ 객체 생성 시 (매번 실행됨)
- 부모 클래스의 인스턴스 초기화 블록 {}
- 부모 클래스의 생성자
- 자식 클래스의 인스턴스 초기화 블록 {}
- 자식 클래스의 생성자


## 소스 코드
```java
package com.thj;

public class IntializerTest {

    public class SuperClass{
        static {
            System.out.println("superclass static initializer");
        }
        {
            System.out.println("superclass instance initializer");
        }
        SuperClass(){
            System.out.println("superclass creator");
        }
    }

    public class SubClass extends SuperClass{
        static {
            System.out.println("subclass static initializer");
        }
        {
            System.out.println("subclass instance initializer");
        }
        SubClass(){
            System.out.println("subclass creator");
        }
    }

    public static void main(String[] args){
        IntializerTest.SubClass subClass = new IntializerTest().new SubClass();
//        superclass static initializer
//        subclass static initializer
//        superclass instance initializer
//        superclass creator
//        subclass instance initializer
//        subclass creator
    }
}
```

## 📦 코드 실행 흐름 분석
```java
IntializerTest.SubClass subClass = new IntializerTest().new SubClass();
```

이 한 줄이 실행되면 다음과 같은 흐름이 발생합니다:
### ① 클래스 로딩 (static 블록 실행)
```java
- SuperClass의 static 블록 → superclass static initializer
- SubClass의 static 블록 → subclass static initializer
```
- ⚠️ static 블록은 클래스가 처음 로딩될 때 한 번만 실행됨

### ② 객체 생성 (new SubClass())
- SuperClass의 인스턴스 초기화 블록 → superclass instance initializer
- SuperClass의 생성자 → superclass creator
- SubClass의 인스턴스 초기화 블록 → subclass instance initializer
- SubClass의 생성자 → subclass creator

### 📌 전체 출력 순서
```
superclass static initializer
subclass static initializer
superclass instance initializer
superclass creator
subclass instance initializer
subclass creator
```


## 🧠 추가 설명: Java 초기화 블록

| 블록 유형             | 설명 |
|----------------------|------|
| `static {}`          | 클래스가 처음 로딩될 때 한 번만 실행됨. 클래스 변수 초기화나 로깅 등에 사용됨 |
| 인스턴스 블록 `{}`   | 객체 생성 시마다 실행됨. 생성자보다 먼저 실행되며, 공통 초기화 코드에 적합 |
| 생성자 `ClassName()` | 인스턴스 블록 이후 실행됨. 매개변수에 따라 오버로딩 가능 |
| 상속 시 초기화 순서  | 부모 클래스의 static → 자식 클래스의 static → 부모 인스턴스 → 부모 생성자 → 자식 인스턴스 → 자식 생성자 |



## 🎯 실전 팁
- 인스턴스 초기화 블록은 모든 생성자에서 공통으로 실행될 코드를 넣을 때 유용
- static 블록은 클래스 초기 설정이나 로깅, 리소스 로딩 등에 사용
- 생성자 오버로딩 시에도 인스턴스 블록은 항상 먼저 실행됨

---

# 변수 초기화
자바의 초기화 순서는 단순히 생성자 호출만이 아니라 static 변수, final 필드, 상속 구조,  
인터페이스 초기화까지 포함하면 훨씬 더 복잡하고 정교해짐.  
아래에 각 요소별로 설명하고, 전체 초기화 순서를 통합해서 정리.

## 🔧 1. static 변수 초기화
- 클래스가 처음 로딩될 때 실행됨
- static {} 블록과 static 변수 초기화는 정적 초기화 순서에 따라 실행됨
- 순서: 정적 변수 선언 → static 블록 실행
```java
class Example {
    static int value = initialize();

    static {
        System.out.println("Static block");
    }

    static int initialize() {
        System.out.println("Static variable initialized");
        return 42;
    }
}
```

### 📌 출력 순서:
```
Static variable initialized
Static block
```


## 🧱 2. final 필드 초기화
- final 필드는 반드시 생성자 또는 초기화 블록에서 한 번만 초기화되어야 함
- 초기화 순서:
- 인스턴스 필드 → 인스턴스 초기화 블록 {} → 생성자
```java
class FinalExample {
    final int x;
    {
        x = 10; // 또는 생성자에서 초기화 가능
    }
}
```


## 🧬 3. 상속 초기화 순서
자식 클래스가 부모 클래스를 상속할 경우, 초기화 순서는 다음과 같습니다:
### ✅ 클래스 로딩 시
- 부모 클래스의 static 변수 및 static 블록
- 자식 클래스의 static 변수 및 static 블록
### ✅ 객체 생성 시
- 부모 클래스의 인스턴스 변수 → 인스턴스 초기화 블록 → 생성자
- 자식 클래스의 인스턴스 변수 → 인스턴스 초기화 블록 → 생성자
## 🧩 4. 인터페이스 초기화 순서- 인터페이스는 static final 상수만 가질 수 있음
- 인터페이스는 필요할 때 로딩되며, static 블록이 없기 때문에 초기화 순서에 큰 영향은 없음
- 인터페이스의 static 필드는 최초 접근 시 초기화됨
```java
interface MyInterface {
    int VALUE = initialize();

    static int initialize() {
        System.out.println("Interface static field initialized");
        return 100;
    }
}
```

## 📌 전체 초기화 순서 요약
| 단계 | 설명 |
|------|------|
| 1    | 부모 클래스 static 변수 및 static 블록 |
| 2    | 자식 클래스 static 변수 및 static 블록 |
| 3    | 부모 클래스 인스턴스 변수 초기화 |
| 4    | 부모 클래스 인스턴스 초기화 블록 `{}` |
| 5    | 부모 클래스 생성자 |
| 6    | 자식 클래스 인스턴스 변수 초기화 |
| 7    | 자식 클래스 인스턴스 초기화 블록 `{}` |
| 8    | 자식 클래스 생성자 |
| 9    | 인터페이스 static 필드 (필요 시) |

## 🧠 실전 팁- final 필드는 반드시 한 번만 초기화되며, 초기화 순서에 민감함
- static 초기화는 클래스 로딩 시 한 번만 실행되므로, 성능이나 로깅에 영향
- 인터페이스는 초기화 순서에 직접 관여하지 않지만, 상수 접근 시 로딩됨

---

