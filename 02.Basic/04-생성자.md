# 생성자

## 생성자 - 필요한 이유
객체를 생성하는 시점에 어떤 작업을 하고 싶다면 생성자(Constructor)를 이용하면 된다.  
생성자를 알아보기 전에 먼저 생성자가 왜 필요한지 코드로 분석.

### 1️⃣ 초기 코드 (MethodInitMain1)
- MemberInit 객체를 생성한 후, name, age, grade를 직접 설정
- 문제점: 객체마다 초기값 설정 코드가 반복됨 → 중복 발생
```java
public class MemberInit {
    String name;
    int age;
    int grade;
}
MemberInit member1 = new MemberInit();
member1.name = "user1";
member1.age = 15;
member1.grade = 90;
```


### 2️⃣ 메서드 도입 (MethodInitMain2)
- initMember(...) 메서드를 만들어서 초기화 로직을 분리
- 장점: 중복 제거, 코드 간결해짐
- 한계: 초기화 메서드가 MemberInit 클래스 외부에 있음 → 객체 지향 원칙에서 벗어남
```java
static void initMember(MemberInit member, String name, int age, int grade) {
    member.name = name;
    member.age = age;
    member.grade = grade;
}
```

### 3️⃣ 객체 지향 방식으로 개선
- MemberInit 클래스 내부에 초기화 메서드(init(...))를 추가
- 객체가 자기 자신의 데이터를 직접 초기화하는 방식
- 장점: 속성과 기능이 한 곳에 모임 → 응집도 높고 유지보수 쉬움
```java
public class MemberInit {
    String name;
    int age;
    int grade;

    void init(String name, int age, int grade) {
        this.name = name;
        this.age = age;
        this.grade = grade;
    }
}


MemberInit member1 = new MemberInit();
member1.init("user1", 15, 90);

```

### ✅ 정리: 객체 초기화 방식 비교

| 방식               | 설명                                       | 객체 지향 관점 |
|--------------------|--------------------------------------------|----------------|
| 직접 설정          | 각 객체마다 `name`, `age`, `grade`를 직접 대입 | ❌ 낮음         |
| 외부 메서드 사용    | `initMember()` 같은 외부 함수로 초기화        | ⚠️ 중간         |
| 내부 메서드 사용    | `MemberInit` 클래스 내부에 `init()` 메서드 정의 | ✅ 높음         |
| 생성자(constructor)| 생성자에서 초기값을 설정                    | ✅ 매우 높음     |



## ✅ this 키워드 정리

### 📌 this 키워드 요약

| 항목                     | 설명                                                                 |
|--------------------------|----------------------------------------------------------------------|
| `this`의 의미             | 현재 인스턴스 자신을 가리키는 참조값                                  |
| 이름이 중복될 때          | 매개변수가 우선 → 멤버 변수에 접근하려면 `this.`를 붙여야 함             |
| 예시 (`this.name = name`) | 오른쪽 `name`은 매개변수, 왼쪽 `this.name`은 멤버 변수                  |
| `this` 생략 가능 여부     | 생략 가능하지만, 이름이 중복되면 반드시 `this` 필요                       |
| 생략 시 변수 탐색 순서    | 지역 변수 → 멤버 변수 → 없으면 오류 발생                                 |
| 코딩 스타일               | 멤버 변수 접근 시 항상 `this`를 붙이는 스타일도 있음                      |
| IDE의 역할               | 최근 IDE는 색상 등으로 지역 변수와 멤버 변수를 시각적으로 구분해줌         |
| 권장 사용 방식            | 이름이 중복될 때만 `this` 사용, 그 외에는 생략해도 무방                    |



### 💡 핵심 예시
```java
class Member {
    String name;

    void initMember(String name) {
        this.name = name; // this.name → 멤버 변수, name → 매개변수
    }
}

class MemberThis {
    String nameField;

    void initMember(String nameParameter) {
        nameField = nameParameter; // 이름이 다르면 this 생략 가능
    }
}
```

---

## 📌 생성자 개념 요약

### ✅ 생성자란?

- 객체를 생성하자마자 초기값을 설정할 수 있도록 도와주는 특별한 메서드
- 클래스 이름과 동일한 이름을 가지며, 반환 타입이 없다
- 객체 생성 시 `new 클래스이름(...)` 형태로 자동 호출됨

### 🔄 생성자와 초기화 메서드 비교

| 항목               | 초기화 메서드 (`initMember`)         | 생성자 (`MemberConstruct`)             |
|--------------------|--------------------------------------|----------------------------------------|
| 호출 시점          | 객체 생성 후 수동 호출                | 객체 생성과 동시에 자동 호출           |
| 호출 실수 가능성   | 있음 (호출 안 하면 초기화 안 됨)       | 없음 (생성 시점에 반드시 호출됨)       |
| 코드 간결성        | 객체 생성 + 초기화 따로 작성           | 한 줄로 객체 생성과 초기화 가능         |
| 필수값 보장        | 보장 안 됨                            | 보장됨 (생성자 호출 없으면 컴파일 오류) |


### 생성자 도입

```java
public class MemberConstruct {
    String name;
    int age;
    int grade;

    MemberConstruct(String name, int age, int grade) {
        System.out.println("생성자 호출 name=" + name + ",age=" + age + ",grade=" +
        grade);
        this.name = name;
        this.age = age;
        this.grade = grade;
    }
}

```

### 예시:
```java
// 초기화 메서드 방식
MemberInit member = new MemberInit();
member.initMember("user1", 15, 90);

// 생성자 방식
MemberConstruct member = new MemberConstruct("user1", 15, 90);
```


### 📌 생성자의 장점
- 객체 생성과 동시에 초기화 가능 → 중복 제거
- 필수값 입력을 강제할 수 있음 → 유령 객체 방지
- 컴파일 시점에 누락된 초기화 체크 가능 → 안전성 향상

---

## 📌 기본 생성자
### 🔧 기본 생성자란?
- 매개변수가 없는 생성자
- 클래스에 생성자가 하나도 없으면 자바가 자동으로 생성
- 생성자가 하나라도 있으면 기본 생성자는 자동 생성되지 않음


### 예시:
```java
public class MemberDefault {
    String name;
    // 기본 생성자 (자동 생성됨)
    public MemberDefault() {
        System.out.println("생성자 호출");
    }
}
```


### 🧾 생성자 핵심 정리
| 항목                     | 설명                                                                 |
|--------------------------|----------------------------------------------------------------------|
| 생성자 이름               | 클래스 이름과 동일해야 함                                              |
| 반환 타입                | 없음 (void도 쓰면 안 됨)                                              |
| 호출 시점                | 객체 생성 시 자동 호출                                                |
| 기본 생성자 자동 생성 조건 | 클래스에 생성자가 하나도 없을 때만 자동 생성됨                         |
| 생성자 장점              | 필수값 입력 보장, 초기화 누락 방지, 코드 간결화                         |
| 생성자 단점              | 생성자 오버로딩 시 선택 실수 가능성 있음 (하지만 컴파일 오류로 쉽게 확인 가능) |



---


## 📌 생성자 오버로딩과 this() 요약
### 🔄 생성자 오버로딩
- 생성자도 메서드처럼 오버로딩 가능
- 매개변수의 개수나 타입이 다르면 여러 생성자를 정의할 수 있음

```java
MemberConstruct(String name, int age)
MemberConstruct(String name, int age, int grade)
```

- grade를 생략한 생성자는 기본값 50을 설정
- 상황에 따라 필요한 생성자를 선택해서 호출 가능

### ✅ this() 생성자 호출
- 생성자 내부에서 다른 생성자를 호출할 때 사용
- 중복된 초기화 코드를 제거할 수 있음
- 반드시 생성자 코드의 첫 줄에 위치해야 함


### 예시: 중복 제거 전
```java
MemberConstruct(String name, int age) {
    this.name = name;
    this.age = age;
    this.grade = 50;
}
```

### 예시: 중복 제거 후 (this() 사용)
```java
MemberConstruct(String name, int age) {
    this(name, age, 50); // 다른 생성자 호출
}
```


### ⚠️ this() 사용 규칙

| 항목             | 설명                                           |
|------------------|------------------------------------------------|
| 사용 목적        | 생성자 내부에서 다른 생성자를 호출할 때 사용     |
| 호출 위치        | 반드시 생성자 코드의 첫 줄에만 작성해야 함        |
| 호출 대상        | 같은 클래스 내의 다른 생성자만 호출 가능          |
| 컴파일 오류 예시 | 첫 줄이 아닌 위치에서 `this(...)` 호출 시 오류 발생 |

```java
// ❌ 오류 발생
MemberConstruct(String name, int age) {
    System.out.println("go");
    this(name, age, 50); // 첫 줄이 아님 → 컴파일 오류
}
```

### 🎯 정리: 생성자의 핵심 개념

| 항목               | 설명                                                   | 비고                         |
|--------------------|--------------------------------------------------------|------------------------------|
| 생성자 정의         | 클래스 이름과 동일, 반환 타입 없음                     | `public 클래스명(...)` 형태  |
| 생성자 호출         | 객체 생성 시 자동 호출                                 | `new 클래스명(...)`          |
| 오버로딩 가능 여부   | 매개변수 다르면 여러 생성자 정의 가능                   | 다양한 초기화 방식 제공      |
| this() 사용         | 생성자 내부에서 다른 생성자 호출                        | 반드시 첫 줄에 위치해야 함   |
| 기본 생성자         | 생성자가 없으면 자바가 자동 생성                        | 매개변수 없는 생성자         |
| 생성자 장점         | 필수값 입력 보장, 초기화 누락 방지, 코드 간결화          | 유령 객체 방지               |

---


## 📘 문제: Book 클래스와 생성자
BookMain 코드가 정상적으로 작동하도록 Book 클래스를 완성.  
특히 생성자 코드에 중복이 없도록 this()를 활용해 구현.  

### ✅ 요구사항
- 기본 생성자: Book()
- 제목과 저자만 받는 생성자: Book(String title, String author)
- 모든 필드를 받는 생성자: Book(String title, String author, int page)
- displayInfo() 메서드로 정보 출력

### 🧩 풀이 코드

```java

public class Book {
    String title;   // 제목
    String author;  // 저자
    int page;       // 페이지 수

    // 기본 생성자
    public Book() {
        this("", "", 0); // 모든 필드 기본값으로 초기화
    }

    // 제목과 저자만 받는 생성자
    public Book(String title, String author) {
        this(title, author, 0); // 페이지 수는 기본값 0
    }

    // 모든 필드를 받는 생성자
    public Book(String title, String author, int page) {
        this.title = title;
        this.author = author;
        this.page = page;
    }

    // 정보 출력 메서드
    void displayInfo() {
        System.out.println("제목: " + title + ", 저자: " + author + ", 페이지: " + page);
    }
}
```

### 🎯 정리: 생성자의 핵심 개념
| 항목             | 설명                                                   | 비고                         |
|------------------|--------------------------------------------------------|------------------------------|
| 생성자 정의       | 클래스 이름과 동일, 반환 타입 없음                     | `public 클래스명(...)` 형태  |
| 생성자 호출       | 객체 생성 시 자동 호출                                 | `new 클래스명(...)`          |
| 오버로딩          | 매개변수 다르면 여러 생성자 정의 가능                   | 다양한 초기화 방식 제공      |
| this() 사용       | 생성자 내부에서 다른 생성자 호출                        | 반드시 첫 줄에 위치해야 함   |
| 기본 생성자       | 생성자가 없으면 자바가 자동 생성                        | 매개변수 없는 생성자         |

---


