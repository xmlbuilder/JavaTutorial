# IO 활용
지금까지의 내용을 기반으로 자바 I/O를 활용한 회원 관리 프로그램 예제를 중심으로 전체 흐름을 정리.  
이 문서는 학습용 샘플로서, 다양한 I/O 방식의 차이와 적용 방법을 코드와 함께 설명합니다.

## 📘 자바 I/O 활용 회원 관리 예제 정리
### 🧩 목표
- 자바의 다양한 I/O 기술을 활용해 회원 정보를 저장하고 조회하는 프로그램을 구현
- 저장 방식에 따라 메모리, 파일, DataStream, ObjectStream을 단계적으로 적용
- 각 방식의 장단점과 기술적 특징을 비교

## 🧱 1단계: 메모리 기반 저장
### ✅ 구조
- Member: 회원 정보 클래스 (id, name, age)
- MemberRepository: 회원 저장소 인터페이스
- MemoryMemberRepository: 메모리에 저장하는 구현체
- MemberConsoleMain: 콘솔 UI

### 💡 핵심 코드
```java
public class MemoryMemberRepository implements MemberRepository {
    private final List<Member> members = new ArrayList<>();

    public void add(Member member) {
        members.add(member);
    }

    public List<Member> findAll() {
        return members;
    }
}
```

### ⚠️ 한계
- 프로그램 종료 시 데이터가 사라짐
- 영속성이 없음

## 📄 2단계: 파일 기반 저장 (문자 스트림)
### ✅ 기술
- BufferedWriter, BufferedReader 사용
- FileMemberRepository 구현체에서 파일에 한 줄씩 저장

### 💡 핵심 코드
```java
try (BufferedWriter bw = new BufferedWriter(new FileWriter(FILE_PATH, UTF_8, true))) {
    bw.write(member.getId() + "," + member.getName() + "," + member.getAge());
    bw.newLine();
}
```
```java
try (BufferedReader br = new BufferedReader(new FileReader(FILE_PATH, UTF_8))) {
    String line;
    while ((line = br.readLine()) != null) {
        String[] data = line.split(",");
        members.add(new Member(data[0], data[1], Integer.valueOf(data[2])));
    }
}
```
- ⚠️ 한계
    - 모든 데이터를 문자열로 변환해야 함
    - 타입 변환 및 구분자 처리 필요

## 💾 3단계: DataStream 기반 저장 (바이트 스트림)
### ✅ 기술
- DataOutputStream, DataInputStream 사용
- 자바의 기본 타입을 그대로 저장 가능
### 💡 핵심 코드
```java
try (DataOutputStream dos = new DataOutputStream(new FileOutputStream(FILE_PATH, true))) {
    dos.writeUTF(member.getId());
    dos.writeUTF(member.getName());
    dos.writeInt(member.getAge());
}
```
```java
try (DataInputStream dis = new DataInputStream(new FileInputStream(FILE_PATH))) {
    while (dis.available() > 0) {
        members.add(new Member(dis.readUTF(), dis.readUTF(), dis.readInt()));
    }
}
```
- ✅ 장점
    - 타입 그대로 저장 가능
    - 구분자 불필요
- ⚠️ 한계
    - 필드를 하나씩 저장해야 함
    - 사람이 직접 읽기 어려움

## 🧠 4단계: ObjectStream 기반 저장 (객체 직렬화)
### ✅ 기술
- ObjectOutputStream, ObjectInputStream 사용
- Serializable 인터페이스 구현 필요
### 💡 핵심 코드
```java
public class Member implements Serializable {
    private String id;
    private String name;
    private Integer age;
}
```
```java
try (ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(FILE_PATH))) {
    oos.writeObject(members);
}
```

```java
try (ObjectInputStream ois = new ObjectInputStream(new FileInputStream(FILE_PATH))) {
    Object obj = ois.readObject();
    return (List<Member>) obj;
}
```

- ✅ 장점
    - 객체 전체를 직렬화하여 저장
    - 컬렉션 단위로 저장 가능
- ⚠️ 한계
    - 버전 관리, 플랫폼 종속성, 성능 이슈
    - 현재는 거의 사용되지 않음

## 🌐 확장: XML, JSON, 데이터베이스
| 기술         | 특징                                                           | 장점                                                         | 단점                                                          |
|--------------|-------------------------------------------------------------|--------------------------------------------------------------|---------------------------------------------------------------|
| XML          | 태그 기반의 구조화된 텍스트 포맷                                     | 유연한 구조, 스키마 정의 가능                                   | 무겁고 복잡함, 문서 크기 큼                                     |
| JSON         | 키-값 기반의 경량 텍스트 포맷                                        | 가볍고 간결, 웹과 모바일 친화적, 표준 포맷                      | 사람이 읽기 쉽지만 성능 최적화에는 한계                         |
| 데이터베이스 | 구조화된 데이터를 효율적으로 저장, 검색, 관리하는 시스템             | 대량 데이터 처리, 무결성 보장, 빠른 검색, 보안 기능              | 초기 설정 복잡, 학습 필요, 파일 기반보다 구현 난이도 높음       |


## 🧭 결론 및 학습 포인트
- 자바 I/O는 목적에 따라 다양한 방식으로 활용 가능
- 문자 기반은 Reader/Writer, 바이트 기반은 InputStream/OutputStream
- 객체 저장은 직렬화(ObjectStream), 타입 저장은 DataStream
- 실무에서는 대부분 JSON + 데이터베이스 조합을 사용

---

