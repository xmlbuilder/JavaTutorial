# 🧠 자바 메모리 모델(JMM) 핵심 정리
## 🔍 JMM이란?
- 자바 프로그램이 메모리에 어떻게 접근하고 수정하는지를 정의하는 모델
- 특히 멀티스레드 환경에서 스레드 간 상호작용과 메모리 가시성을 규정함

## 🔗 happens-before 관계란?
- 작업 A가 작업 B보다 happens-before 관계에 있다면:
  - A의 메모리 변경 사항은 B에서 반드시 보인다
  - 즉, A의 작업이 먼저 실행되고, 그 결과가 B에 전파됨
  - 메모리 가시성과 실행 순서를 보장하는 규칙

## 📋 happens-before 관계가 성립하는 주요 상황

| 상황 구분           | 설명                                                                 |
|--------------------|----------------------------------------------------------------------|
| 프로그램 순서 규칙   | 단일 스레드 내에서는 코드 작성 순서대로 실행됨 (`a = 1; b = 2;`)         |
| volatile 변수 규칙  | 한 스레드의 volatile 변수 쓰기는 다른 스레드의 해당 변수 읽기보다 먼저 발생 |
| Thread.start()     | start() 호출 이전의 작업은 새 스레드의 작업보다 먼저 실행됨              |
| Thread.join()      | join() 대상 스레드의 작업은 join() 반환 이후 작업보다 먼저 실행됨         |
| interrupt() 호출   | interrupt() 호출은 인터럽트 감지 작업보다 먼저 발생함                    |
| 객체 생성 규칙      | 생성자 완료 후에만 다른 스레드에서 해당 객체를 참조할 수 있음             |
| synchronized 블록  | 락을 해제한 후 락을 획득한 스레드는 이전 블록 내 작업을 볼 수 있음        |
| 전이 규칙           | A → B, B → C 관계가 있으면 A → C 관계도 성립함                          |

## ✅ 핵심 요약
- happens-before 관계는 멀티스레드 간 메모리 가시성과 실행 순서를 보장
- volatile, synchronized, ReentrantLock 같은 동기화 기법을 사용하면 JMM 규칙에 따라 안전한 실행이 가능
- 이를 통해 예상치 못한 동작이나 버그를 방지할 수 있음

---
