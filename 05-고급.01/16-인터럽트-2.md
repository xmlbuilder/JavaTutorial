# μΈν„°λ½νΈ 2

## μ½”λ“
```java
public class ThreadStopMainV2 {
    public static void main(String[] args) {
        MyTask task = new MyTask();
        Thread thread = new Thread(task, "work");
        thread.start();
        sleep(4000);

        log("μ‘μ—… μ¤‘λ‹¨ μ§€μ‹ thread.interrupt()");
        thread.interrupt();
        log("work μ¤λ λ“ μΈν„°λ½νΈ μƒνƒ1 = " + thread.isInterrupted());
    }

    static class MyTask implements Runnable {
        @Override
        public void run() {
            try {
                while (true) {
                    log("μ‘μ—… μ¤‘");
                    Thread.sleep(3000);
                }
            } catch (InterruptedException e) {

                log("work μ¤λ λ“ μΈν„°λ½νΈ μƒνƒ2 = " +
                Thread.currentThread().isInterrupted());
                log("interrupt message=" + e.getMessage());

                log("state=" + Thread.currentThread().getState());
            }
            log("μμ› μ •λ¦¬");
            log("μ‘μ—… μΆ…λ£");
        }
    }
}
```

## π§µ μΈν„°λ½νΈ κΈ°λ° μ¤λ λ“ μΆ…λ£ νλ¦„
```mermaid
sequenceDiagram
    participant MainThread
    participant WorkThread

    Note over MainThread: ν”„λ΅κ·Έλ¨ μ‹μ‘
    MainThread->>WorkThread: Thread.start() νΈμ¶
    WorkThread->>WorkThread: while(true) λ°λ³µ μ‹μ‘

    loop μ‘μ—… λ£¨ν”„
        WorkThread->>WorkThread: log("μ‘μ—… μ¤‘")<br>Thread.sleep(3000)
    end

    Note over MainThread: sleep(4000) β†’ 4μ΄ λ€κΈ°
    MainThread->>WorkThread: thread.interrupt() νΈμ¶
    MainThread->>MainThread: log("μΈν„°λ½νΈ μƒνƒ1 = true")

    Note over WorkThread: sleep μ¤‘ μΈν„°λ½νΈ λ°μƒ
    WorkThread->>WorkThread: InterruptedException λ°μƒ<br>catch λΈ”λ΅ μ§„μ…
    WorkThread->>WorkThread: log("μΈν„°λ½νΈ μƒνƒ2 = false")<br>log("state = RUNNABLE")
    WorkThread->>WorkThread: μμ› μ •λ¦¬
    WorkThread->>WorkThread: μ‘μ—… μΆ…λ£
```


## π” ν•µμ‹¬ νλ¦„ μ”μ•½
- WorkThreadλ” Thread.sleep(3000) μ¤‘μ΄μ—κ³ , MainThreadκ°€ 4μ΄ ν›„ interrupt() νΈμ¶
- WorkThreadλ” μ¦‰μ‹ InterruptedExceptionμ„ λ°›μ•„ catch λΈ”λ΅μΌλ΅ μ§„μ…
- catch λΈ”λ΅μ—μ„ μμ› μ •λ¦¬ ν›„ μΆ…λ£
- μΈν„°λ½νΈ μƒνƒλ” μμ™Έ λ°μƒκ³Ό ν•¨κ» μλ™μΌλ΅ falseλ΅ μ΄κΈ°ν™”λ¨

## β… μΈν„°λ½νΈ λ°©μ‹μ μ¥μ 

| ν•­λ©                     | μ„¤λ…                                  | κ΄€λ ¨ μ½”λ“ μ„μΉ        |
|--------------------------|---------------------------------------|------------------------|
| μ¦‰μ‹ λ°μ‘ κ°€λ¥           | `sleep()` μ¤‘μ—λ„ λ°”λ΅ κΉ¨μ–΄λ‚  μ μμ  | `Thread.sleep()`       |
| μμ™Έ κΈ°λ° νλ¦„ μ μ–΄      | `InterruptedException`μΌλ΅ νλ¦„ λ¶„κΈ°  | `catch` λΈ”λ΅           |
| μμ› μ •λ¦¬ κ°€λ¥           | μΆ…λ£ μ§μ „μ— μ •λ¦¬ μ½”λ“ μ‹¤ν–‰ κ°€λ¥       | `log("μμ› μ •λ¦¬")`     |
| μƒνƒ λ³µκµ¬                | μΈν„°λ½νΈ μƒνƒκ°€ μλ™μΌλ΅ μ΄κΈ°ν™”λ¨     | `isInterrupted() == false` |
| λ…ν™•ν• μΆ…λ£ μ‹μ          | μμ™Έ λ°μƒ μ¦‰μ‹ μΆ…λ£ νλ¦„μΌλ΅ μ§„μ…     | `log("μ‘μ—… μΆ…λ£")`     |

- μ΄ λ°©μ‹μ€ runFlag λ°©μ‹λ³΄λ‹¤ ν›¨μ”¬ λ°μ‘μ„±μ΄ λ›°μ–΄λ‚κ³ ,  
    μμ™Έ νλ¦„μ„ ν†µν•΄ μμ› μ •λ¦¬κΉμ§€ λ…ν™•ν•κ² μ²λ¦¬ν•  μ μμ.
