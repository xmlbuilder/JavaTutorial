# μΈν„°λ½νΈ 3

## μ½”λ“
```java
public class ThreadStopMainV2 {
    public static void main(String[] args) {
        MyTask task = new MyTask();
        Thread thread = new Thread(task, "work");
        thread.start();
        sleep(4000);

        log("μ‘μ—… μ¤‘λ‹¨ μ§€μ‹ thread.interrupt()");
        thread.interrupt();
        log("work μ¤λ λ“ μΈν„°λ½νΈ μƒνƒ1 = " + thread.isInterrupted());
    }
    
    static class MyTask implements Runnable {
        @Override
        public void run() {
            try {
                while (true) {
                    log("μ‘μ—… μ¤‘");
                    Thread.sleep(3000);
                }
            } catch (InterruptedException e) {
                log("work μ¤λ λ“ μΈν„°λ½νΈ μƒνƒ2 = " +
                Thread.currentThread().isInterrupted());
                log("interrupt message=" + e.getMessage());
                log("state=" + Thread.currentThread().getState());
            }
            log("μμ› μ •λ¦¬");
            log("μ‘μ—… μΆ…λ£");
        }
    }
}
```

## π§µμΈν„°λ½νΈ μƒνƒ μ§μ ‘ ν™•μΈ + μμ› μ •λ¦¬ μ‹¤ν¨ νλ¦„
```mermaid
sequenceDiagram
    participant MainThread
    participant WorkThread

    Note over MainThread: ν”„λ΅κ·Έλ¨ μ‹μ‘
    MainThread->>WorkThread: Thread.start() νΈμ¶
    WorkThread->>WorkThread: while (!isInterrupted()) λ°λ³µ μ‹μ‘

    loop μ‘μ—… λ£¨ν”„
        WorkThread->>WorkThread: log("μ‘μ—… μ¤‘")
    end

    Note over MainThread: sleep(100ms) ν›„ μΈν„°λ½νΈ μ§€μ‹
    MainThread->>WorkThread: thread.interrupt() νΈμ¶
    MainThread->>MainThread: log("μΈν„°λ½νΈ μƒνƒ1 = true")

    WorkThread->>WorkThread: μΈν„°λ½νΈ μƒνƒ ν™•μΈ<br>β†’ while νƒμ¶
    WorkThread->>WorkThread: log("μΈν„°λ½νΈ μƒνƒ2 = true")

    Note over WorkThread: μμ› μ •λ¦¬ μ‹λ„
    WorkThread->>WorkThread: Thread.sleep(1000) νΈμ¶
    WorkThread->>WorkThread: InterruptedException λ°μƒ<br>β†’ catch μ§„μ…
    WorkThread->>WorkThread: log("μμ› μ •λ¦¬ μ‹¤ν¨")<br>log("μΈν„°λ½νΈ μƒνƒ3 = false")
    WorkThread->>WorkThread: log("μ‘μ—… μΆ…λ£")
```


## π” ν•µμ‹¬ νλ¦„ μ”μ•½
- work μ¤λ λ“λ” isInterrupted()λ΅ μΈν„°λ½νΈ μƒνƒλ¥Ό μ§μ ‘ ν™•μΈν•κ³  λ°λ³µλ¬Έ νƒμ¶
- ν•μ§€λ§ μΈν„°λ½νΈ μƒνƒκ°€ trueλ΅ μ μ§€λ μ±„ μμ› μ •λ¦¬ μ½”λ“(sleep())λ¥Ό μ‹¤ν–‰
- κ·Έ κ²°κ³Ό InterruptedExceptionμ΄ λ°μƒν•μ—¬ μμ› μ •λ¦¬μ— μ‹¤ν¨
- μμ™Έ λ°μƒ ν›„ μΈν„°λ½νΈ μƒνƒλ” μλ™μΌλ΅ falseλ΅ μ΄κΈ°ν™”λ¨


## β… κµν› λ° κ°μ„  ν¬μΈνΈ

| ν•­λ©                     | μ„¤λ…                                                                 | κ΄€λ ¨ μ„μΉ λλ” λ©”μ„λ“             |
|--------------------------|----------------------------------------------------------------------|-----------------------------------|
| isInterrupted()          | ν„μ¬ μ¤λ λ“μ μΈν„°λ½νΈ μƒνƒλ¥Ό ν™•μΈν•μ§€λ§ μƒνƒλ¥Ό μ΄κΈ°ν™”ν•μ§€ μ•μ       | while μ΅°κ±΄λ¬Έ, λ°λ³µλ¬Έ νƒμ¶μ©       |
| sleep()                  | μΈν„°λ½νΈ μƒνƒμΌ κ²½μ° μμ™Έ λ°μƒ β†’ μμ› μ •λ¦¬ μ¤‘ μμ™Έλ΅ μ‹¤ν¨ κ°€λ¥         | μμ› μ •λ¦¬ λ‹¨κ³„μ—μ„ Thread.sleep() |
| Thread.interrupted()     | μΈν„°λ½νΈ μƒνƒλ¥Ό ν™•μΈν•κ³  λ™μ‹μ— μƒνƒλ¥Ό μ΄κΈ°ν™”ν•¨                        | μμ› μ •λ¦¬ μ „μ— νΈμ¶ν•΄ μƒνƒ λ³µκµ¬   |
| InterruptedException     | μμ™Έ λ°μƒ μ‹ μΈν„°λ½νΈ μƒνƒκ°€ μλ™μΌλ΅ falseλ΅ μ΄κΈ°ν™”λ¨                 | catch λΈ”λ΅                        |


## π” ν•µμ‹¬ μ”μ•½
- isInterrupted()λ” μƒνƒλ¥Ό ν™•μΈλ§ ν•λ―€λ΅, μ΄ν›„ sleep() κ°™μ€ μ½”λ“μ—μ„ μμ™Έκ°€ λ°μƒν•  μ μμ
- μμ› μ •λ¦¬ μ „μ— Thread.interrupted()λ¥Ό νΈμ¶ν•λ©΄ μƒνƒλ¥Ό μ΄κΈ°ν™”ν•΄μ„ μμ™Έλ¥Ό λ°©μ§€ν•  μ μμ
- InterruptedExceptionμ΄ λ°μƒν•λ©΄ μƒνƒλ” μλ™μΌλ΅ falseλ΅ λμ•„μ¤λ―€λ΅ catch λΈ”λ΅μ—μ„ μ•μ „ν•κ² μ²λ¦¬ κ°€λ¥



