# ì¸í„°ëŸ½íŠ¸ 1
main ìŠ¤ë ˆë“œì™€ work ìŠ¤ë ˆë“œ ê°„ì˜ ì‹¤í–‰ íƒ€ì´ë°ê³¼ runFlagë¥¼ í†µí•œ ì‘ì—… ì¤‘ë‹¨ íë¦„ì„ ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ìœ¼ë¡œ ì •ë¦¬.

## ì½”ë“œ
```java
public class ThreadStopMainV1 {
    public static void main(String[] args) {
        MyTask task = new MyTask();
        Thread thread = new Thread(task, "work");
        thread.start();
        sleep(4000);
        log("ì‘ì—… ì¤‘ë‹¨ ì§€ì‹œ runFlag=false");
        task.runFlag = false;
    }

    static class MyTask implements Runnable {
        volatile boolean runFlag = true;
        @Override
        public void run() {
            while (runFlag) {
                log("ì‘ì—… ì¤‘");
                sleep(3000);
            }
            log("ìì› ì •ë¦¬");
            log("ì‘ì—… ì¢…ë£Œ");
        }
    }
}
```

## ğŸ§µ  ë‹¤ì´ì–´ê·¸ë¨
```mermaid
sequenceDiagram
    participant MainThread
    participant WorkThread

    Note over MainThread: í”„ë¡œê·¸ë¨ ì‹œì‘
    MainThread->>WorkThread: Thread.start() í˜¸ì¶œ
    WorkThread->>WorkThread: runFlag = true<br>while(runFlag) ë°˜ë³µ ì‹œì‘

    loop ì‘ì—… ë£¨í”„
        WorkThread->>WorkThread: log("ì‘ì—… ì¤‘")<br>sleep(3000)
    end

    Note over MainThread: sleep(4000) â†’ 4ì´ˆ ëŒ€ê¸°
    MainThread->>MainThread: runFlag = false<br>ì‘ì—… ì¤‘ë‹¨ ì§€ì‹œ

    Note over WorkThread: sleep ì¤‘ì´ë¼ ì¦‰ì‹œ ë°˜ì‘ ëª»í•¨
    WorkThread->>WorkThread: sleep ì¢…ë£Œ í›„<br>runFlag í™•ì¸ â†’ false
    WorkThread->>WorkThread: ìì› ì •ë¦¬
    WorkThread->>WorkThread: ì‘ì—… ì¢…ë£Œ
```


## ğŸ” í•µì‹¬ íë¦„ ìš”ì•½
- WorkThreadëŠ” sleep(3000)ìœ¼ë¡œ 3ì´ˆë§ˆë‹¤ ê¹¨ì–´ë‚˜ runFlagë¥¼ í™•ì¸
- MainThreadëŠ” 4ì´ˆ í›„ runFlag=falseë¡œ ì¤‘ë‹¨ ì§€ì‹œ
- WorkThreadê°€ ë‘ ë²ˆì§¸ sleep() ì¤‘ì¼ ë•Œ ì¤‘ë‹¨ ì§€ì‹œê°€ ë“¤ì–´ì˜¤ë¯€ë¡œ, ì¦‰ì‹œ ë°˜ì‘í•˜ì§€ ëª»í•˜ê³  2ì´ˆ í›„ ì¢…ë£Œ
