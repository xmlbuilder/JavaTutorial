# ì¸í„°ëŸ½íŠ¸ ì‹¤ì „ 2
ì´ ì˜ˆì œëŠ” `interrupt()` ì™€ `work`  í”Œë˜ê·¸ë¥¼ ë™ì‹œì— í™œìš©í•˜ì—¬ ìŠ¤ë ˆë“œë¥¼ ì¦‰ì‹œ ì¢…ë£Œí•˜ëŠ” êµ¬ì¡°ë¥¼ ë³´ì—¬ì£¼ëŠ” ì˜ˆ.  
ì•„ë˜ì— ì½”ë“œ íë¦„ì„ ë‹¨ê³„ë³„ë¡œ ì„¤ëª…í•˜ê³ , ë°˜ì‘ì„± í–¥ìƒ í¬ì¸íŠ¸ë¥¼ í•¨ê»˜ ì •ë¦¬.

##  ì†ŒìŠ¤ ì½”ë“œ
```java
public class MyPrinterV2 {
    public static void main(String[] args) throws InterruptedException {
        Printer printer = new Printer();
        Thread printerThread = new Thread(printer, "printer");
        printerThread.start();
        Scanner userInput = new Scanner(System.in);
        while (true) {
            System.out.println("í”„ë¦°í„°í•  ë¬¸ì„œë¥¼ ì…ë ¥í•˜ì„¸ìš”. ì¢…ë£Œ (q): ");
            String input = userInput.nextLine();
            if (input.equals("q")) {
                printer.work = false;
                printerThread.interrupt();
                break;
            }
            printer.addJob(input);
        }
    }
    static class Printer implements Runnable {
        volatile boolean work = true;
        Queue<String> jobQueue = new ConcurrentLinkedQueue<>();
        
        @Override
        public void run() {
            while (work) {
                if (jobQueue.isEmpty()) {
                    continue;
                }
                try {
                    String job = jobQueue.poll();
                    log("ì¶œë ¥ ì‹œì‘: " + job + ", ëŒ€ê¸° ë¬¸ì„œ: " + jobQueue);
                    Thread.sleep(3000); //ì¶œë ¥ì— ê±¸ë¦¬ëŠ” ì‹œê°„
                    log("ì¶œë ¥ ì™„ë£Œ: " + job);
                } catch (InterruptedException e) {
                    log("ì¸í„°ëŸ½íŠ¸!");
                    break;
                }
            }
            log("í”„ë¦°í„° ì¢…ë£Œ");
        }

        public void addJob(String input) {
            jobQueue.offer(input);
        }
    }
}
```

## ğŸ§© MyPrinterV2 êµ¬ì¡° ìš”ì•½
- main ìŠ¤ë ˆë“œ: ì‚¬ìš©ì ì…ë ¥ì„ ë°›ì•„ í”„ë¦°í„°ì— ì „ë‹¬
- printer ìŠ¤ë ˆë“œ: ì…ë ¥ëœ ì‘ì—…ì„ ì¶œë ¥í•˜ê³ , ì¢…ë£Œ ì§€ì‹œë¥¼ ê°ì§€í•˜ë©´ ì¦‰ì‹œ ì¢…ë£Œ
- í•µì‹¬ ê°œì„ ì : interrupt() + work=false ë³‘í–‰ ì‚¬ìš©ìœ¼ë¡œ ì¦‰ì‹œ ë°˜ì‘ ê°€ëŠ¥

## ğŸ”„ ë‹¨ê³„ë³„ ì½”ë“œ íë¦„ ì„¤ëª…
### 1ï¸âƒ£ Printer ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë° ìŠ¤ë ˆë“œ ì‹œì‘
```java
Printer printer = new Printer();
Thread printerThread = new Thread(printer, "printer");
printerThread.start();
```

- Printer ê°ì²´ ìƒì„±
- printerThread ì‹œì‘ â†’ run() ë©”ì„œë“œ ì‹¤í–‰

### 2ï¸âƒ£ ì‚¬ìš©ì ì…ë ¥ ì²˜ë¦¬ (main ìŠ¤ë ˆë“œ)
```java
Scanner userInput = new Scanner(System.in);
while (true) {
    System.out.println("í”„ë¦°í„°í•  ë¬¸ì„œë¥¼ ì…ë ¥í•˜ì„¸ìš”. ì¢…ë£Œ (q): ");
    String input = userInput.nextLine();
```

- ì‚¬ìš©ì ì…ë ¥ì„ ë°˜ë³µì ìœ¼ë¡œ ë°›ìŒ
- "q" ì…ë ¥ ì‹œ ì¢…ë£Œ ì§€ì‹œ

###  3ï¸âƒ£ ì¢…ë£Œ ì§€ì‹œ ì²˜ë¦¬
```java
if (input.equals("q")) {
    printer.work = false;
    printerThread.interrupt();
    break;
}
```

- work=false: while(work) ì¡°ê±´ì„ ë‹¤ìŒ ë£¨í”„ì—ì„œ íƒˆì¶œ
- interrupt(): sleep() ìƒíƒœì¸ ìŠ¤ë ˆë“œë¥¼ ì¦‰ì‹œ ê¹¨ì›€
- ë‘ ê°€ì§€ë¥¼ ë³‘í–‰í•˜ì—¬ ëª¨ë“  ìƒíƒœì—ì„œ ì¦‰ì‹œ ì¢…ë£Œ ê°€ëŠ¥

### 4ï¸âƒ£ ì‘ì—… ì¶”ê°€
```java
printer.addJob(input);
```

- ì…ë ¥ëœ ë¬¸ìì—´ì„ jobQueueì— ì¶”ê°€
- ConcurrentLinkedQueue ì‚¬ìš©ìœ¼ë¡œ ìŠ¤ë ˆë“œ ì•ˆì „ì„± í™•ë³´

### 5ï¸âƒ£ í”„ë¦°í„° ìŠ¤ë ˆë“œì˜ ì‘ì—… ì²˜ë¦¬
```java
while (work) {
    if (jobQueue.isEmpty()) {
        continue;
    }
    try {
        String job = jobQueue.poll();
        log("ì¶œë ¥ ì‹œì‘: " + job + ", ëŒ€ê¸° ë¬¸ì„œ: " + jobQueue);
        Thread.sleep(3000); // ì¶œë ¥ ì‹œê°„
        log("ì¶œë ¥ ì™„ë£Œ: " + job);
    } catch (InterruptedException e) {
        log("ì¸í„°ëŸ½íŠ¸!");
        break;
    }
}
log("í”„ë¦°í„° ì¢…ë£Œ");
```

- jobQueueê°€ ë¹„ì–´ ìˆìœ¼ë©´ continueë¡œ ëŒ€ê¸°
- ì‘ì—…ì´ ìˆìœ¼ë©´ ì¶œë ¥ ì‹œì‘ â†’ sleep(3000)
- interrupt() ë°œìƒ ì‹œ InterruptedExceptionìœ¼ë¡œ ì¦‰ì‹œ íƒˆì¶œ
- work=falseì¼ ê²½ìš° ë‹¤ìŒ ë£¨í”„ì—ì„œ while íƒˆì¶œ


## âœ… ì‹¤í–‰ íë¦„ ì‹œê°í™” (ìš”ì•½)
ì‚¬ìš©ì ì…ë ¥ â†’ jobQueue ì¶”ê°€ â†’ printer ìŠ¤ë ˆë“œê°€ ì¶œë ¥
ì…ë ¥ "q" â†’ work=false + interrupt() â†’ ì¦‰ì‹œ ì¢…ë£Œ


## âš¡ ë°˜ì‘ì„± í–¥ìƒ í¬ì¸íŠ¸

| ë©”ì»¤ë‹ˆì¦˜               | ì ìš© ìœ„ì¹˜           | ì—­í•  ë˜ëŠ” íš¨ê³¼                                 | ë°˜ì‘ì„± í–¥ìƒ ì´ìœ                           |
|------------------------|---------------------|------------------------------------------------|-------------------------------------------|
| interrupt()            | sleep() ì¤‘          | ëŒ€ê¸° ì¤‘ì¸ ìŠ¤ë ˆë“œë¥¼ ì¦‰ì‹œ ê¹¨ì›€                   | `sleep()` ìƒíƒœì—ì„œë„ ì¦‰ì‹œ ì¢…ë£Œ ê°€ëŠ¥        |
| work = false           | while(work) ì¡°ê±´ë¬¸  | ë°˜ë³µë¬¸ íƒˆì¶œ ì¡°ê±´ìœ¼ë¡œ ì‚¬ìš©                      | ë£¨í”„ ì¡°ê±´ì—ì„œ ë¹ ë¥´ê²Œ ì¢…ë£Œ ê°€ëŠ¥             |
| ConcurrentLinkedQueue  | jobQueue ì²˜ë¦¬       | ìŠ¤ë ˆë“œ ì•ˆì „í•œ ì‘ì—… í                         | ë‹¤ì¤‘ ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œë„ ì•ˆì •ì  ì‘ì—… ì²˜ë¦¬     |


## ğŸ” ìš”ì•½ í¬ì¸íŠ¸
- interrupt()ëŠ” ëŒ€ê¸° ì¤‘ì¸ ìŠ¤ë ˆë“œë¥¼ ê¹¨ìš°ëŠ” ì§ì ‘ì ì¸ ìˆ˜ë‹¨ìœ¼ë¡œ, ì¦‰ì‹œ ë°˜ì‘ì„ ê°€ëŠ¥í•˜ê²Œ í•¨
- work=falseëŠ” ë£¨í”„ ì¡°ê±´ì„ ì œì–´í•˜ì—¬ ìŠ¤ë ˆë“œê°€ ë‹¤ìŒ ë°˜ë³µì—ì„œ ë¹ ì ¸ë‚˜ê°ˆ ìˆ˜ ìˆê²Œ í•¨
- ConcurrentLinkedQueueëŠ” ìŠ¤ë ˆë“œ ê°„ ì•ˆì „í•œ ë°ì´í„° ê³µìœ ë¥¼ ë³´ì¥í•˜ì—¬ ì‘ì—… ì²˜ë¦¬ì˜ ì•ˆì •ì„±ì„ ë†’ì„

---





