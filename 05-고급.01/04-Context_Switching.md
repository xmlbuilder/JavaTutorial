# 🧠 컨텍스트 스위칭과 멀티태스킹 요약
## ✅ 컨텍스트 스위칭이란?
- 정의: CPU가 실행 중인 스레드를 멈추고 다른 스레드를 실행할 때,  
  이전 스레드의 상태(레지스터, 변수 등)를 메모리에 저장하고, 새 스레드의 상태를 불러오는 과정
- 비용: 저장/복원 작업으로 인해 시간적 오버헤드 발생
- 사람의 비유: 작업 A 중에 작업 B로 전환하면, 다시 A로 돌아올 때 기억을 되살리는 과정이 필요함

## ✅ CPU 코어 수에 따른 스레드 실행

| CPU 코어 수 | 스레드 수 예시 | 특징 및 효과                                                   |
|-------------|----------------|----------------------------------------------------------------|
| 1개         | 2개            | 컨텍스트 스위칭 비용 발생, 병렬 실행 불가                      |
| 2개         | 2개            | 병렬 실행 가능, CPU 활용도 높음                                |
| 4개         | 2개            | CPU 활용률 낮음, 스레드 부족                                   |
| 4개         | 4개            | 최적화된 상태, 컨텍스트 스위칭 최소화                          |
| 4개         | 100개          | CPU 활용도 높지만 컨텍스트 스위칭 비용 증가, 성능 테스트 필요 |


## ✅ CPU-bound vs I/O-bound 작업

| 구분             | 특징 및 설명                                                       | 예시                                           | 스레드 전략                                  |
|------------------|---------------------------------------------------------------------|------------------------------------------------|----------------------------------------------|
| CPU-bound 작업    | CPU 연산 중심, 계산량 많고 처리 속도가 작업 성능에 직접 영향       | 수학 계산, 영상 인코딩, 알고리즘 처리          | CPU 코어 수 + 1개 정도로 스레드 설정         |
| I/O-bound 작업    | 입출력 대기 중심, CPU는 대부분 유휴 상태로 대기                    | DB 쿼리, 파일 읽기/쓰기, 네트워크 요청         | CPU 코어 수보다 많은 스레드 설정 (성능 테스트 필요) |

- CPU-bound: 스레드 수는 CPU 코어 수 + 1개 정도가 적절
- I/O-bound: 스레드 수는 CPU 코어 수보다 많게 설정해야 효율적  
  → CPU는 대기 중인 스레드 대신 다른 스레드를 실행 가능

## ✅ 실무 예시: 웹 애플리케이션 서버
- 사용자 요청 1건당 스레드 1개 필요
- 대부분의 작업은 I/O-bound (DB 조회, 사용자 입력 대기 등)
- CPU 사용률은 낮고, 스레드는 대기 상태가 많음
- CPU 코어 수에 맞춰 스레드를 제한하면 오히려 성능 저하
- 최적의 스레드 수는 성능 테스트를 통해 결정

## 📌 핵심 요약 표
| 항목                  | 설명 |
|-----------------------|------|
| 컨텍스트 스위칭       | 스레드 전환 시 상태 저장/복원 과정, 오버헤드 발생 |
| 멀티태스킹            | 여러 작업을 동시에 처리, 효율적이지만 비용 존재 |
| CPU-bound 작업        | 계산 중심, 스레드 수는 코어 수 + 1개 추천 |
| I/O-bound 작업        | 대기 중심, 스레드 수는 코어 수보다 많게 설정 |
| 스레드 최적화 전략    | 작업 성격에 따라 스레드 수 조절 필요 |
| 실무에서의 오해       | CPU 사용률 낮은데 장비만 업그레이드하면 낭비 발생 |

---



