# μΈν„°λ½νΈ μ‹¤μ „ 3
μ΄λ² ν”„λ¦°ν„° μμ  V3λ” μΈν„°λ½νΈ μƒνƒλ¥Ό μ§μ ‘ ν™•μΈν•λ” λ°©μ‹μΌλ΅ μ½”λ“λ¥Ό λ” κ°„κ²°ν•κ³  λ°μ‘μ„± μκ² κ°μ„ ν• μ‚¬λ΅€.  
μ•„λμ— ν•µμ‹¬ κ°μ„  μ‚¬ν•­κ³Ό νλ¦„μ„ λ‹¨κ³„λ³„λ΅ μ •λ¦¬.

## μ†μ¤ μ½”λ“
```java
public class MyPrinterV3 {
    public static void main(String[] args) throws InterruptedException {

        Printer printer = new Printer();
        Thread printerThread = new Thread(printer, "printer");
        printerThread.start();
        Scanner userInput = new Scanner(System.in);

        while (true) {
            System.out.println("ν”„λ¦°ν„°ν•  λ¬Έμ„λ¥Ό μ…λ ¥ν•μ„Έμ”. μΆ…λ£ (q): ");
            String input = userInput.nextLine();
            if (input.equals("q")) {
                printerThread.interrupt();
                break;
            }
            printer.addJob(input);
        }
    }

    static class Printer implements Runnable {
        Queue<String> jobQueue = new ConcurrentLinkedQueue<>();
        
        @Override
        public void run() {
            while (!Thread.interrupted()) {
                if (jobQueue.isEmpty()) {
                    continue;
                }
                try {
                    String job = jobQueue.poll();
                    log("μ¶λ ¥ μ‹μ‘: " + job + ", λ€κΈ° λ¬Έμ„: " + jobQueue);
                    Thread.sleep(3000); //μ¶λ ¥μ— κ±Έλ¦¬λ” μ‹κ°„
                    log("μ¶λ ¥ μ™„λ£: " + job);
                } catch (InterruptedException e) {
                    log("μΈν„°λ½νΈ!");
                    break;
                }
            }
            log("ν”„λ¦°ν„° μΆ…λ£");
        }
        public void addJob(String input) {
            jobQueue.offer(input);
        }
    }
}
```

## β… κ°μ„  ν•µμ‹¬ μ”μ•½

| ν•­λ©                   | μ„¤λ… λλ” μ μ© μ„μΉ                      | κ°μ„  ν¨κ³Ό λ° μ΄μ                           |
|------------------------|------------------------------------------|--------------------------------------------|
| `work`                   | μ κ±°λ¨                                   | μƒνƒ λ³€μ μ—†μ΄ μΈν„°λ½νΈλ΅ νλ¦„ μ μ–΄ κ°€λ¥     |
| `Thread.interrupted()`   | printer μ¤λ λ“μ while μ΅°κ±΄μ—μ„ μ‚¬μ©     | λ°λ³µλ¬Έ νƒμ¶ + μΈν„°λ½νΈ μƒνƒ μ΄κΈ°ν™”           |
| `interrupt()`            | main μ¤λ λ“μ—μ„ printerThread.interrupt() νΈμ¶ | sleep μ¤‘μ—λ„ μ¦‰μ‹ λ°μ‘ κ°€λ¥                  |


## π”„ μ½”λ“ νλ¦„ λ‹¨κ³„λ³„ μ„¤λ…
### 1οΈβƒ£ ν”„λ¦°ν„° μ¤λ λ“ μ‹μ‘
```java
Printer printer = new Printer();
Thread printerThread = new Thread(printer, "printer");
printerThread.start();
```

- Printer κ°μ²΄λ¥Ό μƒμ„±ν•κ³  μ¤λ λ“λ΅ μ‹¤ν–‰

### 2οΈβƒ£ μ‚¬μ©μ μ…λ ¥ μ²λ¦¬ (main μ¤λ λ“)
```java
while (true) {
    System.out.println("ν”„λ¦°ν„°ν•  λ¬Έμ„λ¥Ό μ…λ ¥ν•μ„Έμ”. μΆ…λ£ (q): ");
    String input = userInput.nextLine();
    if (input.equals("q")) {
        printerThread.interrupt(); // μΆ…λ£ μ§€μ‹
        break;
    }
    printer.addJob(input); // μ‘μ—… μ¶”κ°€
}
```

- "q" μ…λ ¥ μ‹ interrupt() νΈμ¶λ΅ ν”„λ¦°ν„° μ¤λ λ“ μΆ…λ£ μ λ„
- work λ³€μ μ—†μ΄λ„ μΆ…λ£ νλ¦„ μ μ–΄ κ°€λ¥

### 3οΈβƒ£ ν”„λ¦°ν„° μ¤λ λ“ μ‘μ—… μ²λ¦¬
```java
while (!Thread.interrupted()) {
    if (jobQueue.isEmpty()) {
        continue;
    }
    try {
        String job = jobQueue.poll();
        log("μ¶λ ¥ μ‹μ‘: " + job + ", λ€κΈ° λ¬Έμ„: " + jobQueue);
        Thread.sleep(3000);
        log("μ¶λ ¥ μ™„λ£: " + job);
    } catch (InterruptedException e) {
        log("μΈν„°λ½νΈ!");
        break;
    }
}
log("ν”„λ¦°ν„° μΆ…λ£");
```

- Thread.interrupted()λ΅ λ°λ³µ μ΅°κ±΄ μ μ–΄
- sleep() μ¤‘ μΈν„°λ½νΈ λ°μƒ μ‹ InterruptedExceptionμΌλ΅ μ¦‰μ‹ νƒμ¶
- λ°λ³µλ¬Έκ³Ό μμ™Έ μ²λ¦¬ λ¨λ‘ μΈν„°λ½νΈμ— λ°μ‘ β†’ μ΄μ¤‘ μ•μ „ μ¥μΉ


## π§  μ‹¤ν–‰ νλ¦„ μ”μ•½
μ‚¬μ©μ μ…λ ¥ β†’ jobQueue μ¶”κ°€ β†’ ν”„λ¦°ν„° μ¤λ λ“κ°€ μ¶λ ¥  
μ…λ ¥ "q" β†’ interrupt() νΈμ¶ β†’ λ°λ³µλ¬Έ νƒμ¶ λλ” μμ™Έ λ°μƒ β†’ ν”„λ¦°ν„° μΆ…λ£  

## β΅ λ°μ‘μ„± ν–¥μƒ μ”μΈ

| λ©”μ»¤λ‹μ¦               | μ μ© μ„μΉ λλ” μ΅°κ±΄       | λ°μ‘μ„± ν–¥μƒ μ΄μ                                  |
|------------------------|---------------------------|--------------------------------------------------|
| `Thread.interrupted()`   | while λ°λ³µ μ΅°κ±΄           | μΈν„°λ½νΈ μƒνƒ ν™•μΈκ³Ό λ™μ‹μ— μ΄κΈ°ν™” β†’ λ£¨ν”„ μ¦‰μ‹ νƒμ¶ κ°€λ¥ |
| `InterruptedException`   | Thread.sleep() μ¤‘         | λ€κΈ° μ¤‘ μΈν„°λ½νΈ λ°μƒ μ‹ μ¦‰μ‹ μμ™Έ μ²λ¦¬ β†’ λΉ λ¥Έ μΆ…λ£ κ°€λ¥ |
| `interrupt()`            | main μ¤λ λ“μ—μ„ νΈμ¶      | μ–΄λ–¤ μƒνƒλ“  μ¤λ λ“μ— μΈν„°λ½νΈ μ‹ νΈ μ „λ‹¬ β†’ μ¦‰μ‹ λ°μ‘ μ λ„ |

## π” ν•µμ‹¬ μ”μ•½
- Thread.interrupted()λ” λ°λ³µλ¬Έμ—μ„ μΈν„°λ½νΈ μƒνƒλ¥Ό ν™•μΈν•κ³  μ΄κΈ°ν™”κΉμ§€ μν–‰ν•λ―€λ΅ μ΄ν›„ μ½”λ“μ— μν–¥ μ—†μ
- InterruptedExceptionμ€ sleep() μ¤‘ μΈν„°λ½νΈ λ°μƒ μ‹ μ¦‰μ‹ μμ™Έ μ²λ¦¬λ΅ νλ¦„μ„ μΆ…λ£ν•  μ μμ
- interrupt()λ” μ¤λ λ“κ°€ λ€κΈ° μ¤‘μ΄λ“  μ‹¤ν–‰ μ¤‘μ΄λ“  μ¦‰μ‹ λ°μ‘ν•λ„λ΅ λ§λ“λ” ν•µμ‹¬ νΈλ¦¬κ±°


## β… κ²°λ΅ 
μ΄ κµ¬μ΅°λ” λ¶ν•„μ”ν• μƒνƒ λ³€μ μ—†μ΄, μΈν„°λ½νΈλ§μΌλ΅ μ¤λ λ“ μΆ…λ£λ¥Ό μ μ–΄ν•  μ μμ–΄  
μ½”λ“κ°€ κ°„κ²°ν•΄μ§€κ³  λ°μ‘μ„±λ„ ν–¥μƒλ©λ‹λ‹¤.  
`Thread.interrupted()`λ” λ°λ³µλ¬Έ μ μ–΄μ™€ μƒνƒ μ΄κΈ°ν™”λ¥Ό λ™μ‹μ— μ²λ¦¬ν•  μ μλ” κ°•λ ¥ν• λ„κµ¬μ…λ‹λ‹¤.  

----


